<!doctype html>
<html>
<head>
<meta charset='UTF-8'><meta name='viewport' content='width=device-width initial-scale=1'>

<link href='https://fonts.loli.net/css?family=Open+Sans:400italic,700italic,700,400&subset=latin,latin-ext' rel='stylesheet' type='text/css' /><style type='text/css'>html {overflow-x: initial !important;}:root { --bg-color:#ffffff; --text-color:#333333; --select-text-bg-color:#B5D6FC; --select-text-font-color:auto; --monospace:"Lucida Console",Consolas,"Courier",monospace; --title-bar-height:20px; }
.mac-os-11 { --title-bar-height:28px; }
html { font-size: 14px; background-color: var(--bg-color); color: var(--text-color); font-family: "Helvetica Neue", Helvetica, Arial, sans-serif; -webkit-font-smoothing: antialiased; }
body { margin: 0px; padding: 0px; height: auto; bottom: 0px; top: 0px; left: 0px; right: 0px; font-size: 1rem; line-height: 1.42857; overflow-x: hidden; background: inherit; tab-size: 4; }
iframe { margin: auto; }
a.url { word-break: break-all; }
a:active, a:hover { outline: 0px; }
.in-text-selection, ::selection { text-shadow: none; background: var(--select-text-bg-color); color: var(--select-text-font-color); }
#write { margin: 0px auto; height: auto; width: inherit; word-break: normal; overflow-wrap: break-word; position: relative; white-space: normal; overflow-x: visible; padding-top: 36px; }
#write.first-line-indent p { text-indent: 2em; }
#write.first-line-indent li p, #write.first-line-indent p * { text-indent: 0px; }
#write.first-line-indent li { margin-left: 2em; }
.for-image #write { padding-left: 8px; padding-right: 8px; }
body.typora-export { padding-left: 30px; padding-right: 30px; }
.typora-export .footnote-line, .typora-export li, .typora-export p { white-space: pre-wrap; }
.typora-export .task-list-item input { pointer-events: none; }
@media screen and (max-width: 500px) {
  body.typora-export { padding-left: 0px; padding-right: 0px; }
  #write { padding-left: 20px; padding-right: 20px; }
  .CodeMirror-sizer { margin-left: 0px !important; }
  .CodeMirror-gutters { display: none !important; }
}
#write li > figure:last-child { margin-bottom: 0.5rem; }
#write ol, #write ul { position: relative; }
img { max-width: 100%; vertical-align: middle; image-orientation: from-image; }
button, input, select, textarea { color: inherit; font: inherit; }
input[type="checkbox"], input[type="radio"] { line-height: normal; padding: 0px; }
*, ::after, ::before { box-sizing: border-box; }
#write h1, #write h2, #write h3, #write h4, #write h5, #write h6, #write p, #write pre { width: inherit; }
#write h1, #write h2, #write h3, #write h4, #write h5, #write h6, #write p { position: relative; }
p { line-height: inherit; }
h1, h2, h3, h4, h5, h6 { break-after: avoid-page; break-inside: avoid; orphans: 4; }
p { orphans: 4; }
h1 { font-size: 2rem; }
h2 { font-size: 1.8rem; }
h3 { font-size: 1.6rem; }
h4 { font-size: 1.4rem; }
h5 { font-size: 1.2rem; }
h6 { font-size: 1rem; }
.md-math-block, .md-rawblock, h1, h2, h3, h4, h5, h6, p { margin-top: 1rem; margin-bottom: 1rem; }
.hidden { display: none; }
.md-blockmeta { color: rgb(204, 204, 204); font-weight: 700; font-style: italic; }
a { cursor: pointer; }
sup.md-footnote { padding: 2px 4px; background-color: rgba(238, 238, 238, 0.7); color: rgb(85, 85, 85); border-radius: 4px; cursor: pointer; }
sup.md-footnote a, sup.md-footnote a:hover { color: inherit; text-transform: inherit; text-decoration: inherit; }
#write input[type="checkbox"] { cursor: pointer; width: inherit; height: inherit; }
figure { overflow-x: auto; margin: 1.2em 0px; max-width: calc(100% + 16px); padding: 0px; }
figure > table { margin: 0px; }
tr { break-inside: avoid; break-after: auto; }
thead { display: table-header-group; }
table { border-collapse: collapse; border-spacing: 0px; width: 100%; overflow: auto; break-inside: auto; text-align: left; }
table.md-table td { min-width: 32px; }
.CodeMirror-gutters { border-right: 0px; background-color: inherit; }
.CodeMirror-linenumber { user-select: none; }
.CodeMirror { text-align: left; }
.CodeMirror-placeholder { opacity: 0.3; }
.CodeMirror pre { padding: 0px 4px; }
.CodeMirror-lines { padding: 0px; }
div.hr:focus { cursor: none; }
#write pre { white-space: pre-wrap; }
#write.fences-no-line-wrapping pre { white-space: pre; }
#write pre.ty-contain-cm { white-space: normal; }
.CodeMirror-gutters { margin-right: 4px; }
.md-fences { font-size: 0.9rem; display: block; break-inside: avoid; text-align: left; overflow: visible; white-space: pre; background: inherit; position: relative !important; }
.md-fences-adv-panel { width: 100%; margin-top: 10px; text-align: center; padding-top: 0px; padding-bottom: 8px; overflow-x: auto; }
#write .md-fences.mock-cm { white-space: pre-wrap; }
.md-fences.md-fences-with-lineno { padding-left: 0px; }
#write.fences-no-line-wrapping .md-fences.mock-cm { white-space: pre; overflow-x: auto; }
.md-fences.mock-cm.md-fences-with-lineno { padding-left: 8px; }
.CodeMirror-line, twitterwidget { break-inside: avoid; }
.footnotes { opacity: 0.8; font-size: 0.9rem; margin-top: 1em; margin-bottom: 1em; }
.footnotes + .footnotes { margin-top: 0px; }
.md-reset { margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: top; background: 0px 0px; text-decoration: none; text-shadow: none; float: none; position: static; width: auto; height: auto; white-space: nowrap; cursor: inherit; -webkit-tap-highlight-color: transparent; line-height: normal; font-weight: 400; text-align: left; box-sizing: content-box; direction: ltr; }
li div { padding-top: 0px; }
blockquote { margin: 1rem 0px; }
li .mathjax-block, li p { margin: 0.5rem 0px; }
li blockquote { margin: 1rem 0px; }
li { margin: 0px; position: relative; }
blockquote > :last-child { margin-bottom: 0px; }
blockquote > :first-child, li > :first-child { margin-top: 0px; }
.footnotes-area { color: rgb(136, 136, 136); margin-top: 0.714rem; padding-bottom: 0.143rem; white-space: normal; }
#write .footnote-line { white-space: pre-wrap; }
@media print {
  body, html { border: 1px solid transparent; height: 99%; break-after: avoid; break-before: avoid; font-variant-ligatures: no-common-ligatures; }
  #write { margin-top: 0px; padding-top: 0px; border-color: transparent !important; }
  .typora-export * { -webkit-print-color-adjust: exact; }
  .typora-export #write { break-after: avoid; }
  .typora-export #write::after { height: 0px; }
  .is-mac table { break-inside: avoid; }
  .typora-export-show-outline .typora-export-sidebar { display: none; }
}
.footnote-line { margin-top: 0.714em; font-size: 0.7em; }
a img, img a { cursor: pointer; }
pre.md-meta-block { font-size: 0.8rem; min-height: 0.8rem; white-space: pre-wrap; background: rgb(204, 204, 204); display: block; overflow-x: hidden; }
p > .md-image:only-child:not(.md-img-error) img, p > img:only-child { display: block; margin: auto; }
#write.first-line-indent p > .md-image:only-child:not(.md-img-error) img { left: -2em; position: relative; }
p > .md-image:only-child { display: inline-block; width: 100%; }
#write .MathJax_Display { margin: 0.8em 0px 0px; }
.md-math-block { width: 100%; }
.md-math-block:not(:empty)::after { display: none; }
.MathJax_ref { fill: currentcolor; }
[contenteditable="true"]:active, [contenteditable="true"]:focus, [contenteditable="false"]:active, [contenteditable="false"]:focus { outline: 0px; box-shadow: none; }
.md-task-list-item { position: relative; list-style-type: none; }
.task-list-item.md-task-list-item { padding-left: 0px; }
.md-task-list-item > input { position: absolute; top: 0px; left: 0px; margin-left: -1.2em; margin-top: calc(1em - 10px); border: none; }
.math { font-size: 1rem; }
.md-toc { min-height: 3.58rem; position: relative; font-size: 0.9rem; border-radius: 10px; }
.md-toc-content { position: relative; margin-left: 0px; }
.md-toc-content::after, .md-toc::after { display: none; }
.md-toc-item { display: block; color: rgb(65, 131, 196); }
.md-toc-item a { text-decoration: none; }
.md-toc-inner:hover { text-decoration: underline; }
.md-toc-inner { display: inline-block; cursor: pointer; }
.md-toc-h1 .md-toc-inner { margin-left: 0px; font-weight: 700; }
.md-toc-h2 .md-toc-inner { margin-left: 2em; }
.md-toc-h3 .md-toc-inner { margin-left: 4em; }
.md-toc-h4 .md-toc-inner { margin-left: 6em; }
.md-toc-h5 .md-toc-inner { margin-left: 8em; }
.md-toc-h6 .md-toc-inner { margin-left: 10em; }
@media screen and (max-width: 48em) {
  .md-toc-h3 .md-toc-inner { margin-left: 3.5em; }
  .md-toc-h4 .md-toc-inner { margin-left: 5em; }
  .md-toc-h5 .md-toc-inner { margin-left: 6.5em; }
  .md-toc-h6 .md-toc-inner { margin-left: 8em; }
}
a.md-toc-inner { font-size: inherit; font-style: inherit; font-weight: inherit; line-height: inherit; }
.footnote-line a:not(.reversefootnote) { color: inherit; }
.md-attr { display: none; }
.md-fn-count::after { content: "."; }
code, pre, samp, tt { font-family: var(--monospace); }
kbd { margin: 0px 0.1em; padding: 0.1em 0.6em; font-size: 0.8em; color: rgb(36, 39, 41); background: rgb(255, 255, 255); border: 1px solid rgb(173, 179, 185); border-radius: 3px; box-shadow: rgba(12, 13, 14, 0.2) 0px 1px 0px, rgb(255, 255, 255) 0px 0px 0px 2px inset; white-space: nowrap; vertical-align: middle; }
.md-comment { color: rgb(162, 127, 3); opacity: 0.8; font-family: var(--monospace); }
code { text-align: left; vertical-align: initial; }
a.md-print-anchor { white-space: pre !important; border-width: initial !important; border-style: none !important; border-color: initial !important; display: inline-block !important; position: absolute !important; width: 1px !important; right: 0px !important; outline: 0px !important; background: 0px 0px !important; text-decoration: initial !important; text-shadow: initial !important; }
.md-inline-math .MathJax_SVG .noError { display: none !important; }
.html-for-mac .inline-math-svg .MathJax_SVG { vertical-align: 0.2px; }
.md-fences-math .MathJax_SVG_Display, .md-math-block .MathJax_SVG_Display { text-align: center; margin: 0px; position: relative; text-indent: 0px; max-width: none; max-height: none; min-height: 0px; min-width: 100%; width: auto; overflow-y: visible; display: block !important; }
.MathJax_SVG_Display, .md-inline-math .MathJax_SVG_Display { width: auto; margin: inherit; display: inline-block !important; }
.MathJax_SVG .MJX-monospace { font-family: var(--monospace); }
.MathJax_SVG .MJX-sans-serif { font-family: sans-serif; }
.MathJax_SVG { display: inline; font-style: normal; font-weight: 400; line-height: normal; text-indent: 0px; text-align: left; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; float: none; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; padding: 0px; margin: 0px; zoom: 90%; }
#math-inline-preview-content { zoom: 1.1; }
.MathJax_SVG * { transition: none 0s ease 0s; }
.MathJax_SVG_Display svg { vertical-align: middle !important; margin-bottom: 0px !important; margin-top: 0px !important; }
.os-windows.monocolor-emoji .md-emoji { font-family: "Segoe UI Symbol", sans-serif; }
.md-diagram-panel > svg { max-width: 100%; }
[lang="flow"] svg, [lang="mermaid"] svg { max-width: 100%; height: auto; }
[lang="mermaid"] .node text { font-size: 1rem; }
table tr th { border-bottom: 0px; }
video { max-width: 100%; display: block; margin: 0px auto; }
iframe { max-width: 100%; width: 100%; border: none; }
.highlight td, .highlight tr { border: 0px; }
mark { background: rgb(255, 255, 0); color: rgb(0, 0, 0); }
.md-html-inline .md-plain, .md-html-inline strong, mark .md-inline-math, mark strong { color: inherit; }
.md-expand mark .md-meta { opacity: 0.3 !important; }
mark .md-meta { color: rgb(0, 0, 0); }
@media print {
  .typora-export h1, .typora-export h2, .typora-export h3, .typora-export h4, .typora-export h5, .typora-export h6 { break-inside: avoid; }
}
.md-diagram-panel .messageText { stroke: none !important; }
.md-diagram-panel .start-state { fill: var(--node-fill); }
.md-diagram-panel .edgeLabel rect { opacity: 1 !important; }
.md-require-zoom-fix foreignobject { font-size: var(--mermaid-font-zoom); }
.md-fences.md-fences-math { font-size: 1em; }
.md-fences-math .MathJax_SVG_Display { margin-top: 8px; cursor: default; }
.md-fences-advanced:not(.md-focus) { padding: 0px; white-space: nowrap; border: 0px; }
.md-fences-advanced:not(.md-focus) { background: inherit; }
.typora-export-show-outline .typora-export-content { max-width: 1440px; margin: auto; display: flex; flex-direction: row; }
.typora-export-sidebar { width: 300px; font-size: 0.8rem; margin-top: 80px; margin-right: 18px; }
.typora-export-show-outline #write { --webkit-flex:2; flex: 2 1 0%; }
.typora-export-sidebar .outline-content { position: fixed; top: 0px; max-height: 100%; overflow: hidden auto; padding-bottom: 30px; padding-top: 60px; width: 300px; }
@media screen and (max-width: 1024px) {
  .typora-export-sidebar, .typora-export-sidebar .outline-content { width: 240px; }
}
@media screen and (max-width: 800px) {
  .typora-export-sidebar { display: none; }
}
.outline-content li, .outline-content ul { margin-left: 0px; margin-right: 0px; padding-left: 0px; padding-right: 0px; list-style: none; }
.outline-content ul { margin-top: 0px; margin-bottom: 0px; }
.outline-content strong { font-weight: 400; }
.outline-expander { width: 1rem; height: 1.42857rem; position: relative; display: table-cell; vertical-align: middle; cursor: pointer; padding-left: 4px; }
.outline-expander::before { content: ""; position: relative; font-family: Ionicons; display: inline-block; font-size: 8px; vertical-align: middle; }
.outline-item { padding-top: 3px; padding-bottom: 3px; cursor: pointer; }
.outline-expander:hover::before { content: ""; }
.outline-h1 > .outline-item { padding-left: 0px; }
.outline-h2 > .outline-item { padding-left: 1em; }
.outline-h3 > .outline-item { padding-left: 2em; }
.outline-h4 > .outline-item { padding-left: 3em; }
.outline-h5 > .outline-item { padding-left: 4em; }
.outline-h6 > .outline-item { padding-left: 5em; }
.outline-label { cursor: pointer; display: table-cell; vertical-align: middle; text-decoration: none; color: inherit; }
.outline-label:hover { text-decoration: underline; }
.outline-item:hover { border-color: rgb(245, 245, 245); background-color: var(--item-hover-bg-color); }
.outline-item:hover { margin-left: -28px; margin-right: -28px; border-left: 28px solid transparent; border-right: 28px solid transparent; }
.outline-item-single .outline-expander::before, .outline-item-single .outline-expander:hover::before { display: none; }
.outline-item-open > .outline-item > .outline-expander::before { content: ""; }
.outline-children { display: none; }
.info-panel-tab-wrapper { display: none; }
.outline-item-open > .outline-children { display: block; }
.typora-export .outline-item { padding-top: 1px; padding-bottom: 1px; }
.typora-export .outline-item:hover { margin-right: -8px; border-right: 8px solid transparent; }
.typora-export .outline-expander::before { content: "+"; font-family: inherit; top: -1px; }
.typora-export .outline-expander:hover::before, .typora-export .outline-item-open > .outline-item > .outline-expander::before { content: "−"; }
.typora-export-collapse-outline .outline-children { display: none; }
.typora-export-collapse-outline .outline-item-open > .outline-children, .typora-export-no-collapse-outline .outline-children { display: block; }
.typora-export-no-collapse-outline .outline-expander::before { content: "" !important; }
.typora-export-show-outline .outline-item-active > .outline-item .outline-label { font-weight: 700; }


:root {
    --side-bar-bg-color: #fafafa;
    --control-text-color: #777;
}

@include-when-export url(https://fonts.loli.net/css?family=Open+Sans:400italic,700italic,700,400&subset=latin,latin-ext);

/* open-sans-regular - latin-ext_latin */
  /* open-sans-italic - latin-ext_latin */
    /* open-sans-700 - latin-ext_latin */
    /* open-sans-700italic - latin-ext_latin */
  html {
    font-size: 16px;
}

body {
    font-family: "Open Sans","Clear Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;
    color: rgb(51, 51, 51);
    line-height: 1.6;
}

#write {
    max-width: 860px;
  	margin: 0 auto;
  	padding: 30px;
    padding-bottom: 100px;
}

@media only screen and (min-width: 1400px) {
	#write {
		max-width: 1024px;
	}
}

@media only screen and (min-width: 1800px) {
	#write {
		max-width: 1200px;
	}
}

#write > ul:first-child,
#write > ol:first-child{
    margin-top: 30px;
}

a {
    color: #4183C4;
}
h1,
h2,
h3,
h4,
h5,
h6 {
    position: relative;
    margin-top: 1rem;
    margin-bottom: 1rem;
    font-weight: bold;
    line-height: 1.4;
    cursor: text;
}
h1:hover a.anchor,
h2:hover a.anchor,
h3:hover a.anchor,
h4:hover a.anchor,
h5:hover a.anchor,
h6:hover a.anchor {
    text-decoration: none;
}
h1 tt,
h1 code {
    font-size: inherit;
}
h2 tt,
h2 code {
    font-size: inherit;
}
h3 tt,
h3 code {
    font-size: inherit;
}
h4 tt,
h4 code {
    font-size: inherit;
}
h5 tt,
h5 code {
    font-size: inherit;
}
h6 tt,
h6 code {
    font-size: inherit;
}
h1 {
    font-size: 2.25em;
    line-height: 1.2;
    border-bottom: 1px solid #eee;
}
h2 {
    font-size: 1.75em;
    line-height: 1.225;
    border-bottom: 1px solid #eee;
}

/*@media print {
    .typora-export h1,
    .typora-export h2 {
        border-bottom: none;
        padding-bottom: initial;
    }

    .typora-export h1::after,
    .typora-export h2::after {
        content: "";
        display: block;
        height: 100px;
        margin-top: -96px;
        border-top: 1px solid #eee;
    }
}*/

h3 {
    font-size: 1.5em;
    line-height: 1.43;
}
h4 {
    font-size: 1.25em;
}
h5 {
    font-size: 1em;
}
h6 {
   font-size: 1em;
    color: #777;
}
p,
blockquote,
ul,
ol,
dl,
table{
    margin: 0.8em 0;
}
li>ol,
li>ul {
    margin: 0 0;
}
hr {
    height: 2px;
    padding: 0;
    margin: 16px 0;
    background-color: #e7e7e7;
    border: 0 none;
    overflow: hidden;
    box-sizing: content-box;
}

li p.first {
    display: inline-block;
}
ul,
ol {
    padding-left: 30px;
}
ul:first-child,
ol:first-child {
    margin-top: 0;
}
ul:last-child,
ol:last-child {
    margin-bottom: 0;
}
blockquote {
    border-left: 4px solid #dfe2e5;
    padding: 0 15px;
    color: #777777;
}
blockquote blockquote {
    padding-right: 0;
}
table {
    padding: 0;
    word-break: initial;
}
table tr {
    border: 1px solid #dfe2e5;
    margin: 0;
    padding: 0;
}
table tr:nth-child(2n),
thead {
    background-color: #f8f8f8;
}
table th {
    font-weight: bold;
    border: 1px solid #dfe2e5;
    border-bottom: 0;
    margin: 0;
    padding: 6px 13px;
}
table td {
    border: 1px solid #dfe2e5;
    margin: 0;
    padding: 6px 13px;
}
table th:first-child,
table td:first-child {
    margin-top: 0;
}
table th:last-child,
table td:last-child {
    margin-bottom: 0;
}

.CodeMirror-lines {
    padding-left: 4px;
}

.code-tooltip {
    box-shadow: 0 1px 1px 0 rgba(0,28,36,.3);
    border-top: 1px solid #eef2f2;
}

.md-fences,
code,
tt {
    border: 1px solid #e7eaed;
    background-color: #f8f8f8;
    border-radius: 3px;
    padding: 0;
    padding: 2px 4px 0px 4px;
    font-size: 0.9em;
}

code {
    background-color: #f3f4f4;
    padding: 0 2px 0 2px;
}

.md-fences {
    margin-bottom: 15px;
    margin-top: 15px;
    padding-top: 8px;
    padding-bottom: 6px;
}


.md-task-list-item > input {
  margin-left: -1.3em;
}

@media print {
    html {
        font-size: 13px;
    }
    table,
    pre {
        page-break-inside: avoid;
    }
    pre {
        word-wrap: break-word;
    }
}

.md-fences {
	background-color: #f8f8f8;
}
#write pre.md-meta-block {
	padding: 1rem;
    font-size: 85%;
    line-height: 1.45;
    background-color: #f7f7f7;
    border: 0;
    border-radius: 3px;
    color: #777777;
    margin-top: 0 !important;
}

.mathjax-block>.code-tooltip {
	bottom: .375rem;
}

.md-mathjax-midline {
    background: #fafafa;
}

#write>h3.md-focus:before{
	left: -1.5625rem;
	top: .375rem;
}
#write>h4.md-focus:before{
	left: -1.5625rem;
	top: .285714286rem;
}
#write>h5.md-focus:before{
	left: -1.5625rem;
	top: .285714286rem;
}
#write>h6.md-focus:before{
	left: -1.5625rem;
	top: .285714286rem;
}
.md-image>.md-meta {
    /*border: 1px solid #ddd;*/
    border-radius: 3px;
    padding: 2px 0px 0px 4px;
    font-size: 0.9em;
    color: inherit;
}

.md-tag {
    color: #a7a7a7;
    opacity: 1;
}

.md-toc { 
    margin-top:20px;
    padding-bottom:20px;
}

.sidebar-tabs {
    border-bottom: none;
}

#typora-quick-open {
    border: 1px solid #ddd;
    background-color: #f8f8f8;
}

#typora-quick-open-item {
    background-color: #FAFAFA;
    border-color: #FEFEFE #e5e5e5 #e5e5e5 #eee;
    border-style: solid;
    border-width: 1px;
}

/** focus mode */
.on-focus-mode blockquote {
    border-left-color: rgba(85, 85, 85, 0.12);
}

header, .context-menu, .megamenu-content, footer{
    font-family: "Segoe UI", "Arial", sans-serif;
}

.file-node-content:hover .file-node-icon,
.file-node-content:hover .file-node-open-state{
    visibility: visible;
}

.mac-seamless-mode #typora-sidebar {
    background-color: #fafafa;
    background-color: var(--side-bar-bg-color);
}

.md-lang {
    color: #b4654d;
}

/*.html-for-mac {
    --item-hover-bg-color: #E6F0FE;
}*/

#md-notification .btn {
    border: 0;
}

.dropdown-menu .divider {
    border-color: #e5e5e5;
    opacity: 0.4;
}

.ty-preferences .window-content {
    background-color: #fafafa;
}

.ty-preferences .nav-group-item.active {
    color: white;
    background: #999;
}

.menu-item-container a.menu-style-btn {
    background-color: #f5f8fa;
    background-image: linear-gradient( 180deg , hsla(0, 0%, 100%, 0.8), hsla(0, 0%, 100%, 0)); 
}



</style><title>An optimization algorithm for demosaicing - using DE1 FPGA and camera with LCD screen display</title>
</head>
<body class='typora-export os-windows'><div class='typora-export-content'>
<div id='write'  class=''><h1 id='an-optimization-algorithm-for-demosaicing---using-de1-fpga-and-camera-with-lcd-screen-display'><span>An optimization algorithm for demosaicing - using DE1 FPGA and camera with LCD screen display</span></h1><blockquote><p><em><span>NOTE: This is the course project of </span><strong><span>System on Chip</span></strong></em><span>.</span></p></blockquote><p><em><span>Abstract</span></em><span>— This article is designed to be used as the course final report for the course System-on-Chip Design. During the project, we used a DE1 FPGA development board, model 5CSEMA5F31C6, to implement the demosaic function required by the course, and added median filtering and gamma correction after the demosaic algorithm to make the output image meet the requirements of the human eye.</span></p><p><em><span>Keywords—demosaicing, FPGA, median filtering, gamma correction</span></em></p><h1 id='i---introduction'><span>I.   Introduction </span></h1><p><span>Demosaicing algorithm is a digital image processing used to reconstruct full-color images from incomplete color samples output from image sensors covered with color filter arrays (CFA). It is also called CFA interpolation or color reconstruction. The reconstructed image is usually accurate in uniformly colored areas, but has a loss of resolution (detail and sharpness) and has edge artifacts.</span></p><p><span>Most modern digital cameras use a single sensor coated with a color filter array to acquire images, so demosaicing is a necessary part of the color image pipeline to reconstruct images into a generally viewable format. Many digital cameras are also capable of storing images as raw files and allow users to remove them and demosaic them using professional image processing software, rather than using the camera&#39;s built-in firmware.</span></p><h1 id='ii--demosacing-algorithm'><span>II.  Demosacing Algorithm</span></h1><h2 id='a--color-filter-array'><span>A.  Color Filter Array</span></h2><p><span>A color dropout array is a mosaic of color filters in front of a photographic element. The most commonly used color filter array configuration in business is the Bayer filter, as shown in the figure. It has an odd number of columns consisting of alternating red (R) and green (G) filters, and an even number of columns consisting of alternating green (G) and blue (B) filters. The number of green filters is twice as many as red and blue, which is to simulate the higher sensitivity of the human eye to green light.</span></p><p><span>Because color sampling from the filter array naturally creates blending problems, optical anti-aliasing filters are usually configured between the sensor and the optical range of the lens in order to eliminate false color noise from interpolation and color blending.</span></p><p><span>Because each pixel on the sensor is behind the filter, the output is a matrix of pixel values, each representing the original intensity of one of the three filtered colors, so a demosaicing algorithm is needed to estimate the color levels of each pixel for various colors (Color levels), not just a fraction of a color.</span></p><h2 id='b--bilinear-interpolation'><span>B.  Bilinear Interpolation</span></h2><p><span>Green pixel interpolation: assigns the average of the upper, lower, left and right pixel values as the G-value of the interpolated pixels. Example: G8 = (G3 + G7 + G9 + G13)/ 4.</span></p><p><img src="https://cdn.jsdelivr.net/gh/Mi5sssss/blog_image@main/An-optimization-algorithm-for-demosaicing---using-DE1-FPGA-and-camera-with-LCD-screen-display/图片2.3c1ejvsnkhe0.png" referrerpolicy="no-referrer" alt="图片2"></p><p><code>Fig. 1.  Bayer Layer example</code></p><p><span>Interpolation of red/blue pixels at the green position: the average of two neighboring pixel values of the corresponding color is assigned to the interpolated pixel. Example: B7 = (B6 + B8)/ 2; R7 = (R2 + R12)/ 2.</span></p><p><span>Interpolation of red/blue pixels at blue/red positions: the average of four adjacent diagonal pixel values is assigned to the interpolated pixel. Example: R8 = (R2 + R4 + R12 + R14)/ 4; B12 = (B6 + B8 + B16 + B18)/ 4. The number of cases for this algorithm is the same as the number of cases for 3*3, which is also 4.</span></p><h2 id='c--optimazation-of-bilinear-interpolation'><span>C.  Optimazation of Bilinear Interpolation</span></h2><p><span>In Fig. 1., if the first 4x4 area is taken instead of 3x3 pattern, it is easy to get the array. In this case, it is necessary to obtain the middle four-pixel luminance values, 7, 8,12, 13, where the algorithms for all four are calculated using bilinear interpolation. For example, R7=(R2+R12)/2, B7=(B6+B8)/2, and so on.</span></p><p><span>So, we can get all the information of the 2x2 pixels in the middle through the 4x4-pixel grid in this case, and the clock requirement matches the original requirement of two clocks to get the result.</span></p><h2 id='d--change-of-buffer'><span>D.  Change of Buffer</span></h2><p><span>At the same time, we modify the structure of the buffer while modifying the number of fetched pixel points. We changed the original 3-row linebuffer to a 4-row linebuffer and used one more linebuffer. two linebuffer are taking the brightness values of 1*4 vertical columns of this column and the brightness values of 1x4 vertical columns of pixels after two clocks, which are input to the second and fourth columns of the processing matrix in turn.</span></p><p><img src="https://cdn.jsdelivr.net/gh/Mi5sssss/blog_image@main/An-optimization-algorithm-for-demosaicing---using-DE1-FPGA-and-camera-with-LCD-screen-display/图片3.ujkacynetj4.png" referrerpolicy="no-referrer" alt="图片3"></p><p><code>Fig. 2.  (a) Optimazation of Linebuffer and (b) processing matrix</code></p><h1 id='iii--post-processing'><span>III.  Post Processing</span></h1><h2 id='a--median-filter'><span>A.  Median Filter</span></h2><p><span>Median filtering is a nonlinear signal processing technique based on the statistical theory of ordering that can effectively suppress noise. The basic principle of median filtering is to replace the value of a point in a digital image or digital sequence with the median of the values of the points in a neighborhood of that point, so that the surrounding pixel values are close to the true value, thus eliminating isolated noise points.</span></p><p><span>In Fig. 1., for instance, after taking out the 4</span><em><span>4 pixels for the first time and getting all the information values of the middle 2</span></em><span>2 pixels, we sort the red, green and blue pixel information of the middle four pixels and take the average of the middle two values as the output of the red, green and blue colors. Where the sorting is implemented we are using combinational logic circuits, i.e., no clock consumption is required.</span></p><h2 id='b--gamma-correction'><span>B.  Gamma Correction</span></h2><p><span>In TVs and graphic monitors, the electron beam that occurs in the picture tube and the brightness of the image it generates does not change linearly with the input voltage of the tube; the electron flow changes according to an exponential curve compared to the input voltage, which is greater than the exponent of the electron beam. This means that the signal in the dark area is darker than the actual situation, while the light area is higher than the actual situation. Therefore, to reproduce the picture captured by the camera, the TV and monitor must be gamma compensated. This gamma correction can also be done by the camera. We gamma compensation for the entire TV system, the purpose is to make the camera according to the incident light brightness and the brightness of the picture tube symmetry and the output signal, so the image signal should be introduced an opposite nonlinear distortion, that is, with the TV system gamma curve corresponding to the camera gamma curve, its value should be 1/γ, we call the camera gamma value. The gamma value of the TV system is about 2.2, so the TV system&#39;s camera nonlinear compensation gamma value of 0.45. The gamma value of the color picture tube is 2.8, its image signal correction index should be 1/2.8 = 0.35, but due to the impact of stray light inside and outside the tube, the contrast and saturation of the reproduced image are reduced, so the gamma value of the color camera is still mostly used 0.45. In In practice, we can adjust the gamma value within a certain range according to the actual situation, in order to obtain the best results.</span></p><p><span>The so-called gamma correction is to edit the gamma curve of the image, in order to non-linear tone editing method of the image, detect the dark and light parts of the image signal, and make the ratio of the two increase, so as to improve the image contrast effect. Computer graphics field is used to this screen output voltage and the corresponding luminance conversion relationship curve, called the gamma curve.</span></p><p><span>In our code, we set the gamma values to 2.2 and 1.4, respectively, and did not use a resource-intensive algorithm like a lookup table, because we wanted to use the keys to achieve different gamma values between the conversion on the LCD screen to get different gamma values.</span></p><h2 id='c--implementation-of-wujian100'><span>C.  Implementation of WUJIAN100</span></h2><p><span>Demosaicing module                   </span></p><p><span>We used the wujian100 output enable signal when installing the module we designed. Fig. 3. Give the information of how we use wujian100.</span></p><p><img src="https://cdn.jsdelivr.net/gh/Mi5sssss/blog_image@main/An-optimization-algorithm-for-demosaicing---using-DE1-FPGA-and-camera-with-LCD-screen-display/图片4.6lq42yyj6rk0.png" referrerpolicy="no-referrer" alt="图片4"></p><p><code>Fig. 3.  (a) Optimazation of Linebuffer and (b) processing matrix</code></p><p><span> </span></p><p><span> </span></p><h1 id='iv--result'><span>IV.  Result</span></h1><p><span>In Fig.4., the image displayed by the proximity interpolation algorithm is shown. Comparing the algorithm using bilinear interpolation in Fig. 5., the use of the bilinear interpolation algorithm with median filtering improves the edge jaggedness effect very well. The same can be seen more clearly in the image with gamma correction (Fig.6.), and the dark information in the image with gamma correction is much clearer.</span></p><p><img src="https://cdn.jsdelivr.net/gh/Mi5sssss/blog_image@main/An-optimization-algorithm-for-demosaicing---using-DE1-FPGA-and-camera-with-LCD-screen-display/图片5.2gjhqm52nndw.jpg" referrerpolicy="no-referrer" alt="图片5"></p><p><code>Fig. 4.  Nearest Neighbor Replication</code></p><p><img src="https://cdn.jsdelivr.net/gh/Mi5sssss/blog_image@main/An-optimization-algorithm-for-demosaicing---using-DE1-FPGA-and-camera-with-LCD-screen-display/图片6.6e1x6quoq500.jpg" referrerpolicy="no-referrer" alt="图片6"></p><p><code>Fig. 5.  Bilinear Interpolation and Median filter (no Gamma Correction)</code></p><p><img src="https://cdn.jsdelivr.net/gh/Mi5sssss/blog_image@main/An-optimization-algorithm-for-demosaicing---using-DE1-FPGA-and-camera-with-LCD-screen-display/图片7.tctvwhiw2sg.jpg" referrerpolicy="no-referrer" alt="图片7"></p><p><code>Fig. 6.  Bilinear Interpolation and Median filter (Gamma = 2.2)</code></p><p><span>In order to see more clearly, we chose to use the camera to illuminate the edges at the same location where the features are compared, and it can be seen that the images obtained using our algorithm can eliminate the jagged effect better than the original proximity interpolation algorithm. It can also be seen that the median filtering reduces a lot of the noise information in the bright areas (Fig. 7.).</span></p><figure><table><thead><tr><th><img src="https://cdn.jsdelivr.net/gh/Mi5sssss/blog_image@main/An-optimization-algorithm-for-demosaicing---using-DE1-FPGA-and-camera-with-LCD-screen-display/图片8.1pjcviabprts.jpg" referrerpolicy="no-referrer" alt="图片8"></th><th><img src="https://cdn.jsdelivr.net/gh/Mi5sssss/blog_image@main/An-optimization-algorithm-for-demosaicing---using-DE1-FPGA-and-camera-with-LCD-screen-display/图片9.43orysol4600.jpg" referrerpolicy="no-referrer" alt="图片9"></th></tr></thead><tbody></tbody></table></figure><p><span> </span><code>Fig. 7.     (a) Original (b) our result</code></p><h1 id='v--conclusion'><span>V.  Conclusion</span></h1><p><span>In our improved algorithm, the 3x3 buffer is removed and replaced by a 4x4 computation matrix, and the line buffer structure is modified to use two line buffer to perform the data fetching operation in parallel.</span></p><p><span>After executing the bilinear interpolation algorithm, we added the sorting and median filtering for the four values after the obtained results to receive the corresponding primary output red, green and blue signals, which were then transmitted to the LCD screen for display. In each processing (including whether to use the algorithm of bilinear interpolation, whether to use median filtering, whether to use gamma correction and the difference between taking the value of 2.2 and 1.4 for gamma) we use switches and buttons as the signal for switching. We finally use the wujian100 as an enable signal to connect the keys to the module.</span></p><h5 id='acknowledgment'><span>Acknowledgment</span></h5><p><span>·     Prof. An Fengwei, for brilliant teaching and patient tutorial</span></p><p><span>·     Every TA for excellent instruction and homework correction</span></p><p><span>**</span>
<span>**</span></p><p><span> </span></p></div></div>
</body>
</html>